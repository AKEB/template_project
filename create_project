#!/bin/bash

echo ${PWD}

echo -n "Enter project name: "
read input_project_name
echo -n "Enter site domain: "
read input_domain_name
echo -n "Enter PHP Version: "
read input_php_version
echo -n "Enter HTTP Port: "
read input_http_port
echo -n "Enter HTTPS Port: "
read input_https_port

PROJECT_CODE=`echo ${input_project_name} | tr '[:upper:]' '[:lower:]'`
PROJECT_CODE=`echo "${PROJECT_CODE// /_}"`

git clone https://github.com/AKEB/template_project.git "${PWD}"

rm -rf "${PWD}/.git/"
rm -rf "${PWD}/create_project"
rm -rf "${PWD}/README.md"

sed -i ".bak" -e "s/__PROJECT_CODE__/${PROJECT_CODE}/g" "${PWD}/docker/docker-compose.yml"

echo "
NGINX_PORT=${input_http_port}
NGINX_SSL_PORT=${input_https_port}

PHP_VERSION=${input_php_version}
DOMAIN_NAME=${input_domain_name}
" > "${PWD}/docker/.env"



# wget --no-check-certificate -q -O "${PWD}/.gitignore" "https://raw.githubusercontent.com/AKEB/template_project/main/.gitignore"
# wget --no-check-certificate -q -O "${PWD}/.editorconfig" "https://raw.githubusercontent.com/AKEB/template_project/main/.editorconfig"


# echo <<EOF

# EOF > ${PWD}/.editorconfig
